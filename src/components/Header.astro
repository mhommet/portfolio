---
import LanguageSelector from "./LanguageSelector";
import { t } from "../i18n";

// Récupérer la langue depuis l'URL
const urlPathname = Astro.url.pathname;
const lang = urlPathname.startsWith('/en') ? 'en' : 'fr';

// Récupérer les traductions en utilisant la fonction t avec la langue spécifiée
const skillsLabel = t("header.skills", lang);
const contactLabel = t("header.contact", lang);
const aboutLabel = t("header.about", lang);
const projectsLabel = t("header.projects", lang);
---

<header class="sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
  <div class="container flex h-14 items-center">
    <div class="mr-4 flex">
      <a href={`/${lang}`} class="flex items-center space-x-2">
        <span class="font-bold">Milan Hommet</span>
      </a>
    </div>
    <div class="flex flex-1 items-center justify-end space-x-4">
      <nav class="flex items-center">
        <a href={`/${lang}/#about`} class="px-4 py-2 text-sm font-medium hover:text-primary">
          {aboutLabel}
        </a>
        <a href={`/${lang}/#projects`} class="px-4 py-2 text-sm font-medium hover:text-primary">
          {projectsLabel}
        </a>
        <a href={`/${lang}/#skills`} class="px-4 py-2 text-sm font-medium hover:text-primary">
          {skillsLabel}
        </a>
        <a href={`/${lang}/#contact`} class="px-4 py-2 text-sm font-medium hover:text-primary">
          {contactLabel}
        </a>
      </nav>
      <div id="language-selector-container">
        <LanguageSelector initialLang={lang} client:load />
      </div>
    </div>
  </div>
</header>

<script>
  // Script pour s'assurer que le sélecteur de langue est correctement initialisé
  document.addEventListener('DOMContentLoaded', () => {
    console.log('Header DOM chargé, préparation du sélecteur de langue');
  });
</script> 